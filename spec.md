# 五行精霊と漢方図鑑 最終仕様書 (v1.1)

## 1. プロダクト概要
五行（木火土金水）の概念を、説明を読ませず「遊びながら自然に覚える」ことを目的としたスマートフォン向けWebアプリケーション（PWA）。
難しい漢字や専門用語には「ルビ（ふりがな）」を振り、初心者やお子様でも親しみやすい設計となっている。

## 2. 技術スタック
- **Frontend**: Next.js (App Router), TypeScript
- **Styling**: Tailwind CSS (White Base Theme / Light Mode)
- **State Management**: Zustand
- **Persistence**: localStorage (Hydrate/Save)
- **Animations**: Framer Motion, Lucide React (Icons)
- **Hosting**: Vercel (Deployed via GitHub)

## 3. キャラクターデザイン
5体の精霊はプロンプト生成された独自のAIイラストを使用。
各属性の性格と季節感を反映したデザインで、`/public/images/spirits/` に保存。

- **モク (木)**: `moku.png`
  - 性格: せっかち、成長、若々しい
  - デザイン: 若葉のツノ、風を感じる軽快な緑の衣装
- **カ (火)**: `ka.png`
  - 性格: 情熱的、元気いっぱい、夏
  - デザイン: 燃えるような赤髪、太陽のような明るい衣装
- **ド (土)**: `do.png`
  - 性格: 穏やか、慈愛、安定
  - デザイン: 琥珀色の髪、温かみのあるベージュのローブ
- **コン (金)**: `kon.png`
  - 性格: 鋭い、冷静、秋
  - デザイン: 銀髪、クリスタルや金属をあしらったクールな装飾
- **スイ (水)**: `sui.png`
  - 性格: 神秘的、物静か、冬
  - デザイン: 半透明の青いウェーブ髪、流れるようなシルクの衣装

## 4. 主要機能
### A. ホーム画面
- **精霊カルーセル**: 初期は「木・火・土」の3体が解放。各精霊の気分と元気度を表示。
- **元気（Genki）システム**: 
  - 初期値: 木(20), 火(30), 土(10), 金(10), 水(10)
  - 減少ロジック: 24時間で5ポイントずつ自然減少（約4.8時間ごとに1減少）。
  - 気分への影響: 元気が15未満で「お疲れ（bad）」、70以上で「絶好調（good）」に変化。
- **精霊のお願い**: ランダムで発生するクエスト。対応する修行をクリアすると報酬。
- **解放条件**:
  - コン（金）: 合計習得度 500 で自動解放
  - スイ（水）: 合計習得度 1000 で自動解放

### B. 修行（ミニゲーム）
1. **相生チェイン**: 相生(木→火→土→金→水)の順に属性を繋ぐ。ターゲット出現保証ロジック搭載。
2. **相克ガード**: 暴走する属性に対し、相克（勝てる属性）で抑え込む3択ゲーム。
3. **連想仕分け**: キーワードを正しい五行に仕分ける。

### C. 漢方図鑑
- **収集**: 20種類の漢方カードを収録。
- **デザイン**: 高級感のあるカード型UI。属性ごとのカラー、ルビ付きの名前、解説、フレーバーテキスト。
- **効果**: 「このカードを処方する」ボタンで精霊の元気を回復。使用回数も記録される。

## 5. UI/UX デザイン方針
- **ルビ（ふりがな）対応**: `ruby` タグを使用し、専門用語（漢方名、属性など）にルビを追加。
- **清潔感と高級感**: 白ベースに、洗練されたグラデーションやカードの光沢エフェクトを採用。
- **視認性**: 太字フォント (`font-black`) を多用し、情報の優先順位を明確化。

## 6. 保存データ
- `gogyou-storage-v6`: localStorageに保存。元気の減少計算のため、最後に更新されたタイムスタンプ (`lastGenkiUpdate`) を保持。

## 7. デプロイ手順
1. GitHubリポジトリ `akisuperprof-sketch/gogyou-training-APP` に接続。
2. Vercelのダッシュボードからデプロイ。
